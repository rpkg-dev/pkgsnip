---
editor_options:
  chunk_output_type: console
---

NOTES:

-   This file is *not* included in the [source package](https://r-pkgs.org/package-structure-state.html#source-package) because of the [`.nopurl` suffix in its
    filename](https://pkgpurl.rpkg.dev/dev/reference/purl_rmd.html#-rmd-files-excluded-from-purling).

-   The chunks below have to be manually executed in order to regenerate the package data.

# Define data

NOTES:

-   Although the datasets below are saved as ["internal data" in `R/sysdata.rda`](https://r-pkgs.org/data.html#data-sysdata), some of them might still be
    exported and documented (in the main `.Rmd` document), something [not explicitly
    mentioned](https://coolbutuseless.github.io/2018/12/10/r-packages-internal-and-external-data/) in the book [R
    Packages](https://r-pkgs.org/data.html#data-data).

## `data_abbreviations`

```{r}
data_abbreviations <-
  readr::read_csv(file = "data-raw/abbreviations.csv",
                  col_types = "cc",
                  na = "") %>%
  tibble::rowid_to_column() %>%
  dplyr::group_by(abbreviation) %>%
  dplyr::summarise(full_expressions = list(full_expression),
                   rowids = list(rowid),
                   .groups = "drop") %>%
  dplyr::arrange(purrr::map_int(rowids,
                                dplyr::first)) %>%
  dplyr::select(-rowids) %>%
  dplyr::relocate(full_expressions)
```

# Write data

Save all the small data objects as a single internal file `R/sysdata.rda`. Note that when documenting them, they must be explicitly `@export`ed to be available
to package users.

```{r}
usethis::use_data(data_abbreviations,
                  internal = TRUE,
                  overwrite = TRUE,
                  compress = "xz",
                  version = 3L)
```
